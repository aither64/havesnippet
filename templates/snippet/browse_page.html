{% load i18n endless %}
{% paginate snippets %}
{% for snippet in snippets %}
	<div class="snippet">
		<div>
			<h3>
				{% if show_code and user.is_authenticated %}
					{% spaceless %}
						{% if snippet in user_bookmarks %}
							<a class="unbookmark" href="{% url 'snippet.views.bookmark_snippet_delete' snippet.slug %}" title="{% trans "Delete bookmark" %}">
								<img src="{{ STATIC_URL }}img/star_full.png" alt="{% trans "Delete bookmark" %}">
							</a>
						{% else %}
							<a class="bookmark" href="{% url 'snippet.views.bookmark_snippet' snippet.slug %}" title="{% trans "Bookmark" %}">
								<img src="{{ STATIC_URL }}img/star_empty.png" alt="{% trans "Bookmark" %}">
							</a>
						{% endif %}
					{% endspaceless %}
				{% endif %}

				<a href="{% url 'snippet-view' snippet.slug %}">{{ snippet.get_title }}</a>
				<span>
					{% trans "by" %}
					{% if snippet.user %}
						<a href="{% url 'snippet.views.user_profile' snippet.user.username %}">{{ snippet.user.username }}</a>
					{% else %}
						{{ snippet.get_author }}
					{% endif %} {% trans "in" %}
					<a href="{{ self_url }}?language={{ snippet.language.pk }}">{{ snippet.language.name }}</a>
					{% if user.is_authenticated and snippet.user == user %}
						, <a href="{% url 'snippet.views.edit' snippet.slug %}">{% trans "edit" %}</a>,
						<a href="{% url 'snippet.views.delete' snippet.slug %}">{% trans "delete" %}</a>
					{% endif %}
				</span>
			</h3>
			<p class="date">{{ snippet.pub_date }}</p>
		</div>

		<div class="content cleaner">
			<div class="description">
				{% if show_code %}
					<div class="code">
						{{ snippet.highlighted_content|safe }}
					</div>
				{% endif %}
			</div>

			<div class="snippet-metadata rating-only">
				<p class="value">{{ snippet.rating }}</p>
				{% if user.is_authenticated and snippet not in user_ratings %}
					<p class="rating">
						<a class="minus" href="{% url 'rate-dislike' snippet.slug %}">-</a>
						<a class="plus" href="{% url 'rate-like' snippet.slug %}">+</a>
					</p>
				{% endif %}
			</div>
			<br class="cleaner">
		</div>
		<hr>
	</div>
{% endfor %}
{% show_more %}
